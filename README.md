# Pocketsphinx-Scores
### Speech Recognition in JavaScript

PocketSphinx.js is a speech recognizer that runs entirely in the web browser. It is built on:

* a speech recognizer written in C ([PocketSphinx](http://cmusphinx.sourceforge.net/)) converted into JavaScript using [Emscripten](https://github.com/kripken/emscripten),
* an audio recorder using the web audio API. The audio recorder can be used independently to build other kinds of audio-related web applications.
 
This project was forked from : https://github.com/syl22-00/pocketsphinx.js . Head over there to find a more detailed description on the underlying api and how to compile the code and modify it for different purposes.
 
The display of acoustic scores for each word is the main feature that has been added to the functionality of the live-demo.

You can try it on the project page: https://snd96.github.io/pocketsphinx-scores/live.html

# Overview

This project includes several components that can be used independently:

* `pocketsphinx.js`, a JavaScript library generated by emscripten which is basically PocketSphinx wrapped to provide a simpler API, and compiled into JavaScript.
* `recognizer.js`, a wrapper around `pocketsphinx.js` inside a Web Worker to unload the UI thread from downloading and running the large JavaScript file and running the costly speech recognition process.
* `audioRecorder.js`, an audio recording library, based on [Recorderjs](https://github.com/mattdiamond/Recorderjs). It converts the recorded samples to the proper sample rate and passes them to the recognizer.
* `callbackManager.js`, a small utility to interact with Web Workers with calls and callbacks rather than message passing.

The file `live.html` illustrates how these work together in a real application, that is a good starting point. Make sure you load it through a web server or start Chrome with `--disable-web-security`. For instance, you can start a small web server with `python -m SimpleHTTPServer` in the base directory and open `http://localhost:8000/webapp/live.html` in your browser.

Also Note that on very recent versions of Chrome, the app must be served through https (or localhost, or with `--disable-web-security`) to allow audio recording.

In addition to speech recognition, the acoustic scores of each word is also displayed under the heading "Acoustic Scores" after the speech input is analyzed.

# Web Audio Playback

There is also a play button which can be used to replay the recording. By using Web Audio, you can add all sorts of effects and processing before it is played back, combine it with other recordings, and transform your recording in whatever other ways you want. Recorder.js has a getBuffer method that can be used for retrieving the recorded buffer, as it is within the demo.

getBuffer returns a pair of Float32Arrays of audio data, one for each channel (left and right). To play it back, we simply create the a new source and create left and right buffers on it using context.createBuffer. We set the channelData to be the data arrays we retrieved, connect the source to our destination, and play it back. It's not much more complex than using an <audio> tag, but is potentially much more powerful - we could add all sorts of processing nodes between the source and the destination, if we were so inclined.

